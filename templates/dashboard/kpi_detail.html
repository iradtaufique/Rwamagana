{% extends '_base.html' %}
{% block content %}

<div class="container">
{% with url_name=request.resolver_match.url_name  %}

{% if url_name == 'kpi_charts' %}
<div id="container"></div>
<script src="https://code.highcharts.com/highcharts.src.js"></script>

{# -------------------- Scripts for district and superlevel charts --------------------------------#}
{# -------------------------------------------------------------------------------#}
{#    <script>#}
{#    Highcharts.chart('container',{#}
{##}
{#        chart: {#}
{#            type: 'column'#}
{#        },#}
{#        title: {#}
{#            text: [{{ kpiname }}]#}
{#        },#}
{#        xAxis: {#}
{#            categories: [#}
{#            {% for item in dataset %}' {{item.sector__name}}'{% if not forloop.last%},{%endif%}{% endfor %}#}
{#            ]#}
{#        },#}
{#        series: [{#}
{#            name: 'Ibyakozwe',#}
{##}
{#            data: [#}
{#            {%for item in dataset %}{{item.achiev}}{%if not forloop.last %},{% endif %}{%endfor%}#}
{#            ],#}
{#            color: 'green'#}
{#        }, {#}
{#            name: 'Intego' ,#}
{#            data: [#}
{#            {% for item in dataset %}{{ item.targ}}{% if not forloop.last%},{%endif%}{%endfor%}#}
{#            ],#}
{#            color: 'red'#}
{#        }]#}
{#    });#}
{#</script>#}

{# <div class="container">#}
{#            <table class="table table-bordered mt-5 table-colored table-primary table-hover">#}
{#              <thead class="table-warning">#}
{#                <tr>#}
{#                  <th>IMIRIRE MIBI</th>#}
{#                  <th>ABARARANA N'AMATUNGO</th>#}
{#                  <th>INGO ZIFITE AMAZU AMEZE NKA NYAKATSI</th>#}
{#                  <th>ABAFITE UBWIHERERO BUTUJUJE IBISABWA</th>#}
{#                  <th>ABANGAVU BATEWE INDA</th>#}
{#                  <th>INGO ZIDAFITE UBWIHERERO N'AMBA</th>#}
{#                  <th>ABARWAYE AMAVUNJA</th>#}
{#                </tr>#}
{#              </thead>#}
{#              <tbody>#}
{#                {% for i in ibyakozwe %}#}
{#                    <tr>#}
{#                      <td class="align-middle ">{{ i.name }} </td>#}
{#                      <td class="align-middle">{{ i.number_of_member }}</td>#}
{#                      <td class="align-middle">{{ i.irangamuntu }} </td>#}
{#                      <td class="align-middle">{{ i.sector }} </td>#}
{#                      <td class="align-middle">{{ i.cell }} </td>#}
{#                      <td class="align-middle">{{ i.village }} </td>#}
{#                      <td class="align-middle"><div class="text-center"><a href="{{i.image.url}}" target="_blank"><img style="width: 30px; height: 30px" src="{{ i.image.url }}"></a> </div> </td>#}
{#                    </tr>#}
{#                    {% empty %}#}
{#                    <tr>#}
{#                      <td class="text-center font-italic" colspan="7">No Information Provided Yet</td>#}
{#                    </tr>#}
{#                {% endfor %}#}
{#              </tbody>#}
{#            </table><br>#}
{#         </div>#}


{# -------------------- Scripts for sector charts --------------------------------#}
{# -------------------------------------------------------------------------------#}


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<link href="https://cdn.webdatarocks.com/latest/webdatarocks.min.css" rel="stylesheet" />
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.toolbar.min.js"></script>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.js"></script>
<script src="https://code.highcharts.com/4.2.2/highcharts.js"></script>
<script src="https://code.highcharts.com/4.2.2/highcharts-more.js"></script>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.highcharts.js"></script>

<div class="container">
<table>
    <tr>
        <td style="width: 100%;">
            <div id="wdr-component"></div>
        </td>
        <td>

        </td>
    </tr>
</table>
<div class="mt-5">
    <h1 class="text-center">CrossTab table</h1>

    <div id="highchartsContainer" style="width:100%;height:100%;"></div>
</div>
</div>



    <script>
    var pivot = new WebDataRocks({
    container: "#wdr-component",
    toolbar: true,
    report: {
        "dataSource": {
            "dataSourceType": "json",
            "data": getJSONData()
        },
        slice: {
            rows: [{
                uniqueName: "KPI Name"
            }, {
                uniqueName: "Measures"
            }],
            columns: [{
                uniqueName: "Sector"
            }],
            measures: [{
                uniqueName: "Ibyakozwe"
            }, {
                uniqueName: "Intego"
            }]
        }
    },
    reportcomplete: function() {
        pivot.off("reportcomplete");
        createChart();
    }
});

function createChart() {
    pivot.highcharts.getData({
        type: "column"
    }, function(data) {
        Highcharts.chart("highchartsContainer", data);
    }, function(data) {
        Highcharts.chart("highchartsContainer", data);
    });
}

function getJSONData() {

    return [ {% for item in dataset %}
        {
        "KPI Name": " {{item.kpi__name}} ",
        "Sector": "{{ item.sector__name }}",
        "Ibyakozwe": "{{item.achiev}}",
        "Intego": "{{ item.targ}}"
    },

        {% endfor %}]

}
</script>


{% elif url_name == 'sector_charts' %}

{#<div id="container"></div>#}
{#<script src="https://code.highcharts.com/highcharts.src.js"></script>#}
{#<script>#}
{#    Highcharts.chart('container',{#}
{##}
{#        chart: {#}
{#            type: 'bar'#}
{#        },#}
{#        title: {#}
{#            text: [{{ kpiname }}]#}
{#        },#}
{#        xAxis: {#}
{#            categories: [#}
{#            {% for item in dataset %}' {{item.kpi__name}}'{% if not forloop.last%},{%endif%}{% endfor %}#}
{#            ]#}
{#        },#}
{#        series: [{#}
{#            name: 'Ibyakozwe',#}
{##}
{#            data: [#}
{#            {%for item in dataset %}{{item.achiev}}{%if not forloop.last %},{% endif %}{%endfor%}#}
{#            ],#}
{#            color: 'green'#}
{#        }, {#}
{#            name: 'Intego' ,#}
{#            data: [#}
{#            {% for item in dataset %}{{ item.targ}}{% if not forloop.last%},{%endif%}{%endfor%}#}
{#            ],#}
{#            color: 'red'#}
{#        }]#}
{#    });#}
{#    {{ kpiname }}#}
{#</script>#}




    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<link href="https://cdn.webdatarocks.com/latest/webdatarocks.min.css" rel="stylesheet" />
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.toolbar.min.js"></script>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.js"></script>
<script src="https://code.highcharts.com/4.2.2/highcharts.js"></script>
<script src="https://code.highcharts.com/4.2.2/highcharts-more.js"></script>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.highcharts.js"></script>

<div class="container">
<table>
    <tr>
        <td style="width: 100%;">
            <div id="wdr-component"></div>
        </td>
        <td>

        </td>
    </tr>
</table>
<div class="mt-5">
    <h1 class="text-center">CrossTab table</h1>

    <div id="highchartsContainer" style="width:100%;height:100%;"></div>
</div>
</div>



    <script>
    var pivot = new WebDataRocks({
    container: "#wdr-component",
    toolbar: true,
    report: {
        "dataSource": {
            "dataSourceType": "json",
            "data": getJSONData()
        },
        slice: {
            rows: [{
                uniqueName: "KPI Name"
            }, {
                uniqueName: "Measures"
            }],
            columns: [{
                uniqueName: "Sector"
            }],
            measures: [{
                uniqueName: "Ibyakozwe"
            }, {
                uniqueName: "Intego"
            }]
        }
    },
    reportcomplete: function() {
        pivot.off("reportcomplete");
        createChart();
    }
});

function createChart() {
    pivot.highcharts.getData({
        type: "column"
    }, function(data) {
        Highcharts.chart("highchartsContainer", data);
    }, function(data) {
        Highcharts.chart("highchartsContainer", data);
    });
}

function getJSONData() {

    return [ {% for item in dataset %}
        {
        "KPI Name": " {{item.kpi__name}} ",
        "Sector": "{{ item.sector__name }}",
        "Ibyakozwe": "{{item.achiev}}",
        "Intego": "{{ item.targ}}"
    },

        {% endfor %}]

}
</script>



{%endif%}
{%endwith%}
</div>
{% endblock content %}